# Weather Forecast Application

This application provides weather forecasts using various machine learning models.

## Project Structure

```plaintext
weather_forecast_app/
├── app/
│   ├── __init__.py             # Makes 'app' a Python package
│   ├── main.py                 # FastAPI app entrypoint
│   ├── models/                 # Saved models (generated by train_models.py)
│   │   └── <city>_<algorithm>.pkl
│   ├── data/                   # Input CSV data per city
│   │   ├── ahmedabad.csv
│   │   ├── mumbai.csv
│   │   ├── delhi.csv
│   │   └── bengaluru.csv
│   ├── ml/                     # Machine learning code
│   │   ├── train_models.py     # Script to train & save models
│   │   ├── predict.py          # Function to load model & make prediction
│   │   └── ensemble.py         # Ensemble logic
│   └── utils/                  # Utility functions
│       └── preprocess.py       # Data loading and preprocessing
├── frontend/                   # Frontend code
│   ├── index.html              # Main HTML page
│   ├── style.css               # CSS styles
│   └── script.js               # Frontend JavaScript logic
├── requirements.txt            # Python dependencies
└── README.md                   # This file
```

## Setup & Running (Fresh Copy)

Follow these steps after copying the `weather_forecast_app` folder to a new location:

1.  **Navigate to Project Directory:** Open Command Prompt or PowerShell and change directory into the project folder:
    ```bash
    cd path\to\weather_forecast_app
    ```
    (Replace `path\to\` with the actual path where you copied the folder).

2.  **Install Dependencies:** Install the required Python packages:
    ```bash
    pip install -r requirements.txt
    ```

3.  **Place Data:** Ensure the weather data CSV files (`ahmedabad.csv`, `mumbai.csv`, `delhi.csv`, `bengaluru.csv`) are present in the `app/data/` directory. If they are missing, you need to obtain them (e.g., by running a separate data fetching script if available, or copying them manually).

4.  **Train Models:** Run the training script to generate the `.pkl` model files. This step is crucial as the models are not typically copied with the code.
    ```bash
    python -m app.ml.train_models
    ```
    This command must be run from the root `weather_forecast_app` directory. It will save models into the `app/models/` directory and might take a significant amount of time.

5.  **Start the Backend (FastAPI):** Once the models are trained, start the backend server:
    ```bash
    uvicorn app.main:app --reload
    ```
    The API will typically be available at `http://127.0.0.1:8000`. Keep this terminal window open while using the application.

6.  **Open the Frontend:** Open the `frontend/index.html` file directly in your web browser (e.g., double-click the file in File Explorer, or navigate to `file:///path/to/weather_forecast_app/frontend/index.html`).

7.  **Test:** Use the dropdowns in the browser to select a city, model, and forecast duration, then click "Get Forecast". Check the browser's developer console (usually F12) and the terminal running `uvicorn` for logs and potential errors.

## API Endpoint

*   **GET `/predict`**
    *   **Query Parameters:**
        *   `city` (str, required): e.g., `ahmedabad`
        *   `model_name` (str, required): e.g., `LightGBM`, `Ensemble`
        *   `forecast_type` (str, required): `48h` or `1week`
        *   `day_of_week` (int, optional): 0-6 (Mon-Sun), only for `1week` type.
    *   **Returns:** JSON array of forecast objects.

## Notes

*   The Ensemble model averages the predictions of all base models (LightGBM, CatBoost, ExtraTrees, XGBoost, HistGradientBoosting).
*   Ensure you have sufficient historical data in the CSV files for the lag features (`LAG_FEATURES` in `preprocess.py` and `train_models.py`) to work correctly.
*   The training script might take a significant amount of time depending on the data size and machine specs.